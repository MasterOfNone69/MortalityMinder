---
title: "State Comparison"
Author: Farukh Saidmuratov 
Date: Oct 16, 2019 
---

# Libraries and Environment
```{r}
set.seed(300)
current.dir <- getwd()

# set working directory to current apps init
path.to.current.app <- file.path("..", "init")
setwd(file.path(path.to.current.app))

source("Librarian.R")
source("Loader_CHR2019.R")
source("Loader_CDC.R")
source("Loader_GEO.R")
source("Analyzer_PCA.R")
source("Clustering_Lib.R")
source("Analyzer_Correlation.R")
source("Theme.R") # for styles for plots 

source("CDC_Lib.R")# For making plot 

# revert to original working directory
current.dir <- getwd()
setwd(current.dir)
```

# Labs line mort for multiple states 
```{r}
labs.line.mort <- function(state.choice1, state.choice2, death.cause) {
  labs(
    title = paste(
      state.choice1, 
      paste("Death of", death.cause, "Trend"), 
      state.choice2, 
      sep = ' - '
    ),
    caption = "Data Sorce: CDCWONDER Multi-Cause of Death",
    x = "Period", y = "Mortality Rate (# per 100k)"
  )
}
```

# Parameters. Set first state to be Mass., and second state to be Maine. Explore difference between deaths of cardiovascular disease.
```{r}
death.causes <- c("Despair","Cancer","Assault","Cardiovascular")
input <- list(state_choice1 = state.abb[21], state_choice2 = state.abb[19], 
              death_cause = death.causes[4])
```

# Compare the mortality trends of Mass. and Maine 2 New England states, where MA has Affordable Health Care
# Act type policies, while Maine doesn't 

# Get data on states 
```{r}
data.state1 <- cdc.mort.mat(cdc.data, input$state_choice1, input$death_cause)
data.state2 <- cdc.mort.mat(cdc.data, input$state_choice2, input$death_cause)
```

# Sum mortality rate on time period (columns)
```{r}

```


# Plot comparison between states
```{r}
plot_mort_line <- function() {
  ggplot(
    data_State1,
    aes(
      x = period, y = death_rate,
      color = state, group = state
    )
  ) +
    geom_line(size = 1) +
    geom_point(color = "black", shape = 21, fill = "white") +
    labs.line.mort(input$state_choice, input$death_cause) +
    color.line.cluster() +
    theme.line.mort() +
    guides(
      color = guide_legend(reverse = T)
    )
}
```



